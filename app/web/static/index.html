<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>LocalPro Chat Orchestrator</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <header class="topbar">
    <div>
      <h1>ChatGPT Pro (Local)</h1>
      <p class="sub">Local multi-agent orchestrator with Tavily research.</p>
    </div>
    <div class="actions">
      <button id="settingsBtn">Settings</button>
      <span id="modelWarning" class="warning"></span>
    </div>
  </header>

  <main class="layout">
    <section class="panel">
      <h2>Ask a question</h2>
      <form id="chatForm">
        <div class="input-row">
          <textarea id="question" rows="4" placeholder="Ask anything..."></textarea>
          <button type="button" id="micBtn" class="ghost">ðŸŽ¤</button>
        </div>
        <div class="controls">
          <div>
            <label><input type="radio" name="mode" value="auto" checked> Auto reasoning</label>
            <label><input type="radio" name="mode" value="manual"> Manual</label>
            <select id="manualLevel">
              <option value="LOW">LOW</option>
              <option value="MED" selected>MED</option>
              <option value="HIGH">HIGH</option>
              <option value="ULTRA">ULTRA</option>
            </select>
          </div>
          <div class="slider-wrap">
            <label>Reasoning depth</label>
            <input type="range" id="depthSlider" min="0" max="3" value="1">
            <span id="depthLabel">MED</span>
            <label><input type="checkbox" id="depthAuto" checked> AUTO</label>
          </div>
          <div>
            <label>Search depth</label>
            <select id="searchDepth">
              <option value="auto">Auto</option>
              <option value="basic">Basic</option>
              <option value="advanced">Advanced</option>
            </select>
          </div>
          <div>
            <label>Max results</label>
            <input type="number" id="maxResults" value="6" min="1" max="15">
          </div>
          <div>
            <label><input type="checkbox" id="strictMode"> Strict mode</label>
          </div>
          <div>
            <label><input type="checkbox" id="evidenceDump"> Evidence dump</label>
          </div>
          <div>
            <label><input type="checkbox" id="autoMemory" checked> Auto memory</label>
          </div>
          <div>
            <label>STT lang</label>
            <input type="text" id="sttLang" value="en-US" size="6">
          </div>
        </div>
        <button type="submit">Run</button>
      </form>

      <div id="chatThread" class="chat-thread"></div>
    </section>

    <section class="panel activity">
      <div class="panel-header">
        <h2>Activity</h2>
        <button type="button" id="toggleActivity" class="ghost">Collapse</button>
      </div>
      <div id="activityFeed" class="feed"></div>
    </section>

    <section class="panel memory">
      <div class="panel-header">
        <h2>Memory</h2>
        <button type="button" id="refreshMemory" class="ghost">Refresh</button>
      </div>
      <input type="text" id="memorySearch" placeholder="Search memory...">
      <div id="memoryList" class="feed small"></div>
    </section>
  </main>

  <section class="panel result">
    <h2>Final answer</h2>
    <div id="finalAnswer"></div>
    <div id="confidence"></div>
    <div id="sources"></div>
    <div id="evidence" class="hidden"></div>
  </section>

  <div id="settingsModal" class="modal hidden">
    <div class="modal-content">
      <h3>Settings</h3>
      <label>Legacy LM Studio Base URL <input id="cfgBaseUrl"></label>
      <label>Orchestrator Base URL <input id="cfgOrchBase"></label>
      <label>Orchestrator Model ID <input id="cfgOrch"></label>
      <label>Worker A Base URL <input id="cfgWorkerABase"></label>
      <label>Worker A Model ID <input id="cfgQwen8"></label>
      <label>Worker B Base URL <input id="cfgWorkerBBase"></label>
      <label>Worker B Model ID <input id="cfgQwen8B"></label>
      <label>Worker C Base URL <input id="cfgWorkerCBase"></input></label>
      <label>Worker C Model ID <input id="cfgQwen8C"></label>
      <label>Router Base URL <input id="cfgRouterBase"></label>
      <label>Router Model ID <input id="cfgQwen4"></label>
      <label>Summarizer Base URL <input id="cfgSummarizerBase"></label>
      <label>Summarizer Model ID <input id="cfgSummarizer"></label>
      <label>Verifier Base URL <input id="cfgVerifierBase"></label>
      <label>Verifier Model ID <input id="cfgVerifier"></label>
      <label>Tavily API Key <input id="cfgTavily" type="password"></label>
      <label>Search depth default <input id="cfgSearchMode"></label>
      <label>Max results base <input id="cfgMaxBase" type="number"></label>
      <label>Max results high <input id="cfgMaxHigh" type="number"></label>
      <label>Extract depth <input id="cfgExtract"></label>
      <div class="panel-header">
        <h4>Discovery</h4>
        <button type="button" id="discoverBtn">Discover models</button>
      </div>
      <label>Discovery base URLs (comma-separated) <input id="cfgDiscovery"></label>
      <div class="modal-actions">
        <button id="saveSettings">Save</button>
        <button id="closeSettings">Close</button>
      </div>
      <p id="settingsStatus" class="status"></p>
    </div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
